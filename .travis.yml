language: node_js
node_js: node
addons:
  chrome: stable
script:
- npm run lint
- |
  if [ $TRAVIS_PULL_REQUEST != false ] && [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    echo "Pull request with secure environment variables, running Sauce tests...";
    npm run test:sauce || travis_terminate 1;
  else
    echo "Not a pull request and/or no secure environment variables, running headless tests...";
    npm run test:headless || travis_terminate 1;
  fi
env:
  global:
  - SAUCE_USERNAME: Desire2Learn
  - REPO_NAME=custom-teacher-course-creation
  - OWNER_NAME=BrightspaceUI
  - secure: C7CNTUV/rpCpxbXWRLsnsIiqnpV0kxliNkvc3fksmKOtumPpCv5Wa5WiOlusvyYAPkOMozfMSdhAt6u45IbIQZ3iAOYtDlIz3E6rFocyV78d3vjUAtBV796HLiyvVhonk5nk8rkPIgSxUNqVdkHhHWNH6GXQUnxImAsmuRH5Sm8BUc58t4LJxxAeT8yvSt9pTBAJOafG0gp+wvP3xbZnu6mlnH+cgQM5Dd2a0uBa5Jd6TKlOz/no7eGpOcI9ErbBbsfW2NshpSKWKUUIKSN/dXysdCFUKEDQFYPLG6uBgQaWr1cWK1TzjBjPFtreNrmpuGdbcA5dcn4mwc1Qd1dEQwrK7ChUh/INP4vSk4CWilIzYfHcnQ7RJcuCUrkxY4WT6lnol/tQ556tEyCQXWBgPFudgvwjT1VkDJZ08MMEB+RhCo8HtMhUJ3Aip+hMKDDiiLwloJxbN1V7dhdx9RIAymC0AsSKxbSFB9pNHmiEUeCJmeaMLy8Xu6lCamWXtAhg4U20dHaU0/kXG5a515XGdLUQRvM4wHXe8wTmPPpv485p/LaWeWI2VBUiZAWaoUUVkk6aJj7nZsDoywRIXAlkglXXkRzejiCDG21MmiwsfDFfT6+A11uXiLnaJC7Gp8U1R0TYa5O1JLZM8MNPitih7s5V2w+a4x3/DL+ix1CIjvA=
deploy:
- provider: script
  skip_cleanup: true
  script: npx semantic-release
